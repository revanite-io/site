{{ $icon := .Get "icon" | default "fa-lightbulb" -}}
{{ $color := .Get "color" | default "#fff" -}}

<div class="td-card card mx-3">
    {{ with $.Get "header" }}
      <div class="card-header" style="background-color: {{ $color }}">
        {{ with $.Get "icon" }}
            <div class="h1">
                <i class="{{ if not (or (hasPrefix $icon "fas ") (hasPrefix $icon "fab ")) }}fas {{ end }}{{ $icon }}"></i>
            </div>
        {{ end }}
        <h2>
        {{ if eq $.Page.File.Ext "md" }}
          {{ $.Get "header" | markdownify }}
        {{ else }}
          {{ $.Get "header" | htmlUnescape | safeHTML }}
        {{ end }}
        </h2>
      </div>
    {{ end }}
    <div class="card-body">
      {{ with $.Get "title" }}
        <h5 class="card-title">
          {{ if eq $.Page.File.Ext "md" }}
            {{ $.Get "title" | markdownify }}
          {{ else }}
            {{ $.Get "title" | htmlUnescape | safeHTML }}
          {{ end }}
        </h5>
      {{ end }}
      {{ with $.Get "subtitle" }}
        <h6 class="card-title mb-2 text-muted">
          {{ if eq $.Page.File.Ext "md" }}
            {{ $.Get "subtitle" | markdownify }}
          {{ else }}
            {{ $.Get "subtitle" | htmlUnescape | safeHTML }}
          {{ end }}
        </h6>
      {{ end }}
      {{ with $.Inner }}
        <p class="card-text">
          {{ if eq $.Page.File.Ext "md" }}
            {{ $.Inner | markdownify }}
          {{ else }}
            {{ $.Inner | htmlUnescape | safeHTML }}
          {{ end }}
        </p>
      {{ end }}
    </div>
    {{ with $.Get "footer" }}
      <div class="card-footer">
        {{ if eq $.Page.File.Ext "md" }}
          {{ $.Get "footer" | markdownify }}
        {{ else }}
          {{ $.Get "footer" | htmlUnescape | safeHTML }}
        {{ end }}
      </div>
    {{ end }}
  </div>